module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},66680,(a,b,c)=>{b.exports=a.x("node:crypto",()=>require("node:crypto"))},50227,(a,b,c)=>{b.exports=a.x("node:path",()=>require("node:path"))},41759,a=>a.a(async(b,c)=>{try{let b=await a.y("pg-6d75120e0d9fdbe9");a.n(b),c()}catch(a){c(a)}},!0),96524,(a,b,c)=>{b.exports=a.x("@aws-sdk/client-s3-0a2e7f48b72a2e28",()=>require("@aws-sdk/client-s3-0a2e7f48b72a2e28"))},44665,a=>{a.n(a.i(28992))},52549,a=>{a.n(a.i(10116))},23636,a=>{a.n(a.i(6624))},67047,a=>{a.n(a.i(48785))},10558,a=>{a.n(a.i(67281))},1593,a=>{"use strict";a.s(["ProjectWorkspace",()=>b]);let b=(0,a.i(23835).registerClientReference)(function(){throw Error("Attempted to call ProjectWorkspace() from the server but ProjectWorkspace is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/components/projects/project-workspace.tsx <module evaluation>","ProjectWorkspace")},97713,a=>{"use strict";a.s(["ProjectWorkspace",()=>b]);let b=(0,a.i(23835).registerClientReference)(function(){throw Error("Attempted to call ProjectWorkspace() from the server but ProjectWorkspace is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/components/projects/project-workspace.tsx","ProjectWorkspace")},65089,a=>{"use strict";a.i(1593);var b=a.i(97713);a.n(b)},81013,a=>{"use strict";var b=a.i(96524),c=a.i(3817);new b.S3Client({endpoint:c.env.MINIO_ENDPOINT,forcePathStyle:!0,region:c.env.MINIO_REGION,credentials:{accessKeyId:c.env.MINIO_ACCESS_KEY,secretAccessKey:c.env.MINIO_SECRET_KEY}}),a.s([])},81913,a=>a.a(async(b,c)=>{try{a.i(66680);var d=a.i(50472),e=a.i(97006);a.i(46622);var f=a.i(28528),g=a.i(97034);a.i(81013);var h=b([g]);async function i(a,b){let c=await g.db.query.projects.findFirst({where:(0,d.and)((0,d.eq)(f.projects.id,a),(0,d.eq)(f.projects.ownerUserId,b))});return c||(await g.db.query.projectMembers.findFirst({where:(0,d.and)((0,d.eq)(f.projectMembers.projectId,a),(0,d.eq)(f.projectMembers.userId,b))})?g.db.query.projects.findFirst({where:(0,d.eq)(f.projects.id,a)}):null)}async function j(a){let[b]=await g.db.select().from(f.revisions).where((0,d.eq)(f.revisions.projectId,a)).orderBy((0,e.desc)(f.revisions.createdAt)).limit(1),[c]=await g.db.select().from(f.auditRuns).where((0,d.eq)(f.auditRuns.projectId,a)).orderBy((0,e.desc)(f.auditRuns.createdAt)).limit(1);return{latestRevision:b,latestAudit:c}}[g]=h.then?(await h)():h,a.s(["ensureProjectAccess",()=>i,"getLatestProjectState",()=>j]),c()}catch(a){c(a)}},!1),74614,a=>a.a(async(b,c)=>{try{var d=a.i(71157),e=a.i(61774);a.i(4049);var f=a.i(29319),g=a.i(65089),h=a.i(81913),i=a.i(3817),j=a.i(72637),k=b([h,j]);async function l(a){let b=await (0,j.requireServerSession)(),{projectId:c}=await a.params,k=await (0,h.ensureProjectAccess)(c,b.user.id);k||(0,f.notFound)();let l=await (0,h.getLatestProjectState)(k.id);return(0,d.jsx)("main",{className:"min-h-screen bg-[#0b0f15] text-zinc-100",children:(0,d.jsxs)("div",{className:"mx-auto grid max-w-[1500px] gap-4 px-4 py-5 lg:px-6",children:[(0,d.jsxs)("header",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-xs uppercase tracking-wide text-zinc-500",children:"Project"}),(0,d.jsx)("h1",{className:"text-xl font-semibold",children:k.name})]}),(0,d.jsx)(e.default,{href:"/dashboard",className:"text-sm text-sky-300 hover:text-sky-200",children:"Back to dashboard"})]}),(0,d.jsx)(g.ProjectWorkspace,{projectId:k.id,initialRevisionId:l.latestRevision?.id??null,initialAuditId:l.latestAudit?.id??null,modelAllowlist:i.env.AUDIT_MODEL_ALLOWLIST})]})})}[h,j]=k.then?(await k)():k,a.s(["default",()=>l]),c()}catch(a){c(a)}},!1),73623,a=>{a.v(b=>Promise.all(["server/chunks/ssr/b49bc_better-auth_dist_adapters_memory-adapter_index_mjs_fb227d54._.js"].map(b=>a.l(b))).then(()=>b(87718)))},37667,a=>{a.v(b=>Promise.all(["server/chunks/ssr/b49bc_better-auth_dist_adapters_kysely-adapter_index_mjs_09e48db8._.js"].map(b=>a.l(b))).then(()=>b(25889)))},80606,a=>{a.v(b=>Promise.all(["server/chunks/ssr/b49bc_better-auth_dist_adapters_kysely-adapter_bun-sqlite-dialect_mjs_06d51eb4._.js"].map(b=>a.l(b))).then(()=>b(79205)))},49900,a=>{a.v(b=>Promise.all(["server/chunks/ssr/b49bc_better-auth_dist_adapters_kysely-adapter_node-sqlite-dialect_mjs_4aa321ba._.js"].map(b=>a.l(b))).then(()=>b(49379)))},29517,a=>{a.v(a=>Promise.resolve().then(()=>a(77806)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__b4b53520._.js.map